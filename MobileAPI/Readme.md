<h2>Проект Виртуальной стажировки по разработке мобильного приложения для ФСТР (Федерация Спортивного Туризма России).</h2>

<h3>С какой проблемой к нам обратился заказчик:</h3>
<p>
На <a href="https://pereval.online/">сайте ФСТР</a> ведётся база горных перевалов, которая пополняется туристами.
После преодоления очередного перевала, турист заполняет отчёт в формате PDF и отправляет его на электронную почту федерации.
Экспертная группа ФСТР получает эту информацию, верифицирует, а затем вносит её в базу, которая ведётся в Google-таблице.
Весь процесс очень неудобный и долгий и занимает в среднем от 3 до 6 месяцев.
</p>
<h3>Как заказчик хочет решить эту проблему</h3>
<p>
ФСТР заказала студентам SkillFactory разработать мобильное приложение для Android и IOS, которое упростило бы туристам задачу по отправке данных о перевале и сократило время обработки запроса до трёх дней.
Пользоваться мобильным приложением будут туристы. В горах они будут вносить данные о перевале в приложение и отправлять их в ФСТР, как только появится доступ в Интернет.
Модератор из федерации будет верифицировать и вносить в базу данных информацию, полученную от пользователей, а те в свою очередь смогут увидеть в мобильном приложении статус модерации и просматривать базу с объектами, внесёнными другими.
</p>
<h4>Для пользователя в мобильном приложении будут доступны следующие действия:</h4>
<p>- Внесение информации о новом объекте (перевале) в карточку объекта.</p>
<p>- Редактирование в приложении неотправленных на сервер ФСТР данных об объектах. На перевале не всегда работает Интернет.</p>
<p>- Заполнение ФИО и контактных данных (телефон и электронная почта) с последующим их автозаполнением при внесении данных о новых объектах.</p>
<p> Отправка данных на сервер ФСТР.</p>
<p>- Получение уведомления о статусе отправки (успешно/неуспешно).</p>
<p>- Согласие пользователя с политикой обработки персональных данных в случае нажатия на кнопку «Отправить» при отправке данных на сервер.</p>
<h4>Пользователь с помощью мобильного приложения также будет передавать в ФСТР следующие данные о перевале:</h4>
<p>- координаты перевала и его высота;</p>
<p>- имя пользователя;</p>
<p>- почта и телефон пользователя;</p>
<p>- название перевала;</p>
<p>- несколько фотографий перевала.</p>

<p>Допустимые значения поля status:

```
'new' - новая заявка(default-значение);
'pending' — на рассмотрении;
'accepted' — заявка принята;
'rejected' — заявка отклонена.
```

</p>
<h2>Описание методов API</h2>
<h4>Метод <i>POST</i> /submitData/</h4>
Этот метод принимает JSON в теле запроса с информацией о перевале.
<h4>Пример JSON:</h4>

```JSON
{
    "beauty_title": "пер.",
    "title": "Дятлова",
    "other_titles": "седл.",
    "connect": "0",
    "add_time": "2023-10-30T15:13:14",
    "user": {
        "email": "123@example.com",
        "name": "Иван",
        "second_name": "Иванов",
        "otc": "Иванович",
        "phone": "87778887788"
    },
    "coordinates": {
        "latitude": "11.1111",
        "longitude": "22.2222",
        "height": "3333"
    },
    "level": {
        "winter": "",
        "summer": "1А",
        "autumn": "",
        "spring": "2A"
    },
    "images": [
        {
            "data": "image1",
            "title": "Основание"
        },
        {
            "data": "image2",
            "title": "Седловина"
        },
        {
            "data": "image3",
            "title": "Обрыв"
        }
    ]
}
```

Результатом выполнения метода является JSON-ответ содержащий следующие данные:
`'status'` + код HTTP, целое число:

```
 200 — запрос успешно обработан;
 201 — запись успешно создана;
 400 — Bad Request (при нехватке полей);
 404 — Not Found (при несуществующей записи);
 500 — ошибка при выполнении операции.
```

<p>`message` — строка +</p>
<p>`Success` — если отправлено успешно или `Причина ошибки` — если она произошла</p>
<p>`id` — идентификатор, который был присвоен объекту при добавлении в базу данных (если "status":201).</p>

<h4>Примеры JSON-ответов:</h4>

```
{ "status": 201, "message": "Success", "id": 42}
{ "status": 400, "message": "Empty request", "id": null}
{ "status": 500, "message": "Ошибка подключения к базе данных", "id": null}
```

<h3>Метод <i>GET</i> /submitData/</h3>
Этот метод получает одну запись (перевал) по её id с выведением всей информацию об перевале, в том числе статус модерации.
<h4>Пример JSON: </h4>

```JSON
{
    "id": 7,
    "user": {
        "first_name": "Иван",
        "last_name": "Иванов",
        "patronymic": "Иванович",
        "email": "123@example.com",
        "phone": "87778887788"
    },
    "coordinates": {
        "id": 1,
        "latitude": "11.1111",
        "longitude": "22.2222",
        "height": "3333"
    },
    "levels": {
        "id": 1,
        "winter": "",
        "summer": "1A",
        "autumn": "",
        "spring": "2A"
    },
    "images": [
        {
            "id": 1,
            "created": "2023-10-30T15:15:10.318457",
            "title": "Основание",
            "data": "",
            "pass": 7
        },
        {
            "id": 2,
            "created": "2023-10-30T15:15:47.761538",
            "title": "Седловина",
            "data": "",
            "pass": 7
        },
        {
            "id": 3,
            "created": "2023-10-30T15:16:21.891734",
            "title": "Обрыв",
            "data": "",
            "pass": 7
        }
    ],
    "created": "2023-10-30T15:23:41.128346",
    "beauty_title": "пер.",
    "title": "Дятлова",
    "other_titles": "седл.",
    "connect": "0",
    "add_time": "2023-10-30T15:13:14",
    "status": "NW"
}
```

<h4>Примеры JSON-ответов:</h4>

```
{ "status": 200, "message": "Success", "id": 42 }
{ "status": 400, "message": "Such a record does not exist", "id": null}
```

<h3>Метод <i>PATCH</i> /submitData/</h3>
Позволяет отредактировать существующую запись (замена), если она в статусе `new`. При этом редактировать можно все поля, кроме ФИО, адреса почты и номера телефона.
В качестве результата изменения приходит ответ содержащий следующие данные:

`state`:

```
1 — если успешно удалось отредактировать запись в базе данных.
0 — отредактировать запись не удалось.
```

`message`:
<p>- сообщение об успешном редактировании при `state=1`)</p>
<p>- сообщение о причине неудачного обновления записи при `state=0`)</p>

<h4>Примеры JSON-ответов:</h4>

```
{ "status": 200, "message": "Success", "state": 1 }
{ "status": 400, "message": "Status is not 'new'", "state": 0}
```

<h3>Метод <i>GET+email</i> /submitData/?user_email=email</h3>

Возвращает данные всех объектов, отправленных на сервер пользователем с почтой email.
Пример запроса:

```
GET /submitData/?user_email=123@example.com
```